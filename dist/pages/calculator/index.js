"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[505],{4376:function(e,a,t){var s=t(2180),r=t(1413),n=t(5671),l=t(3144),o=t(7326),c=t(136),m=t(7277),i=t(4942),u=t(7294),h=t(2954),d=t.n(h),f=t(1515),x=t(5893),A=function(e){(0,c.Z)(t,e);var a=(0,m.Z)(t);function t(){return(0,n.Z)(this,t),a.apply(this,arguments)}return(0,l.Z)(t,[{key:"changeTab",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this,a=this.props,t=a.current,s=a.tabs,r=void 0===s?[]:s;return(0,x.jsx)(f.G7,{className:"tabs",children:r.map((function(a){return(0,x.jsx)(f.G7,{className:"tabItem",onClick:function(){return e.changeTab(a)},children:(0,x.jsx)(f.G7,{className:"tabItemLabel ".concat(a.value===t?"tabItemLabelActivated":""),children:a.label})},a.value)}))})}}]),t}(u.Component),g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUxpcdXZ3dba3qr//9fZ39Xc3NbZ3tXZ3dXa3dXZ3Uo6wsAAAAAJdFJOUwDgogMfJBi/kOqT5egAAABKSURBVCjPY2CgJkgPQOWzSYqiCiTOnIiqhGnmTDQlmgOmxHPmzAZkPovkzEkGyAKOM2cq01kBQyWaAqAKVAUMLEIGaNGQTL0YBQAL8SAk1e7/aQAAAABJRU5ErkJggg==",p=function(e){(0,c.Z)(t,e);var a=(0,m.Z)(t);function t(){return(0,n.Z)(this,t),a.apply(this,arguments)}return(0,l.Z)(t,[{key:"changeIndex",value:function(e){var a=e.detail.value,t=this.props,s=t.options,r=void 0===s?[]:s,n=t.onChangeValue;n&&n(r[a]?r[a].value:"")}},{key:"changeValue",value:function(e){var a=e.detail.value;this.props.onChangeValue&&this.props.onChangeValue(a)}},{key:"render",value:function(){var e=this.props,a=e.value,t=e.options,s=void 0===t?[]:t,r=e.mode,n=void 0===r?"selector":r,l=e.start,o=e.end,c=(0,x.jsxs)(f.G7,{className:"content",children:[!a&&(0,x.jsx)(f.G7,{className:"placeholder",children:"\u8bf7\u9009\u62e9"}),a&&this.props.children,(0,x.jsx)(f.Ee,{src:g,className:"moreIcon"})]});if("selector"===n){var m=s.findIndex((function(e){return e.value===a})),i=s.map((function(e){return e.label}));return(0,x.jsx)(f.cW,{mode:"selector",value:m,range:i,onChange:this.changeIndex.bind(this),className:"picker",children:c})}return"date"===n?(0,x.jsx)(f.cW,{mode:"date",value:a?a.toString():"",start:l,end:o,onChange:this.changeValue.bind(this),className:"picker",children:c}):null}}]),t}(u.Component),v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcBAMAAACAI8KnAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAnUExURUxpcZubm5qampmZmZmZmZmZme7u7pmZmeDg4KCgoMHBwbm5udPT01dtHcQAAAAGdFJOUwAwir685oO6nKsAAACUSURBVBjTY2DABIzK4aVGAnCeezkQlMD46pV72jJOTy+C8JjLl6UBQVa5AZhrPiMNDDqLQTymyjYIN2O6ApArXpEGBe2FQK77Mhg3qwRoS2UaHEwXYGCqRnC3KzCw1CC4xw0YWCsQ3PYABvYyBDe9AJ2LppgZ1Sg0i5CdUS6A7kh0L6B5EM376IGDFnToAYsW7EgAAMRhcSx+xF02AAAAAElFTkSuQmCC",N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAzUExURUxpcec4NuY5Nuc5NuY5Nv8zM+c3NeY4Neo3N+c4Nuw5OeY4Nuc4Nuc4N+k5NuY3NuY4Nvnw9rwAAAAQdFJOUwDHz2wOBYT0Lr4b45OeUOaMqPqRAAAAsUlEQVQoz41SWxKEMAizD6HYV+5/2l2p2nHcYeXDDqZJgLIsryKRdOYulJ6Q4Aq5w2sBuLYUY2qVgbJOLAqY4pURQ65sFeSbUsqQk1uQt3sFW0Y57oEfBSbG+CegoR4cswtDjyAHUd03PxrxahEHlVCV5882vXKr6gnanoQ5hLDnTXX7sHYTdMOtf78MteQJsprqYYKmrFmQ2Yo5BHN89uDNJ7Mf21wTe8Hs1fyz1D/jA2SjEAHUI1pTAAAAAElFTkSuQmCC",j=function(e){(0,c.Z)(t,e);var a=(0,m.Z)(t);function t(){return(0,n.Z)(this,t),a.apply(this,arguments)}return(0,l.Z)(t,[{key:"changeValue",value:function(e){var a=this.props.onChange;a&&a(e)}},{key:"render",value:function(){var e=this,a=this.props,t=a.value,s=a.options,r=void 0===s?[]:s;return(0,x.jsx)(f.G7,{className:"radio",children:r.map((function(a){return(0,x.jsxs)(f.G7,{className:"item",onClick:function(){return e.changeValue(a)},children:[(0,x.jsx)(f.Ee,{className:"icon",src:t===a.value?N:v}),(0,x.jsx)(f.G7,{className:"label",children:a.label})]},a.value)}))})}}]),t}(u.Component),I=function(e){(0,c.Z)(t,e);var a=(0,m.Z)(t);function t(){return(0,n.Z)(this,t),a.apply(this,arguments)}return(0,l.Z)(t,[{key:"changeValue",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this,a=this.props.value,t=void 0===a?{value:4.3,factor:1}:a,s=(t.value*t.factor).toFixed(2);return(0,x.jsxs)(f.G7,{className:"rate",children:[(0,x.jsxs)(f.G7,{className:"item",children:[(0,x.jsx)(f.II,{type:"digit",maxLength:5,className:"input",value:t.value.toString(),onInput:function(a){return e.changeValue((0,r.Z)((0,r.Z)({},t),{},{value:Number(a.detail.value)}))}}),(0,x.jsx)(f.G7,{className:"unit",children:"%"})]}),(0,x.jsx)(f.G7,{className:"times",children:"X"}),(0,x.jsxs)(f.G7,{className:"item",children:[(0,x.jsx)(f.II,{type:"digit",maxLength:5,className:"input",value:t.factor.toString(),onInput:function(a){return e.changeValue((0,r.Z)((0,r.Z)({},t),{},{factor:Number(a.detail.value)}))}}),(0,x.jsx)(f.G7,{className:"unit",children:"\u500d"})]}),(0,x.jsxs)(f.G7,{className:s,children:["= ",s,"%"]})]})}}]),t}(u.Component),V=t(9754),G=[{value:"commercial",label:"\u5546\u4e1a\u8d37"},{value:"housing",label:"\u516c\u79ef\u91d1\u8d37"},{value:"mix",label:"\u7ec4\u5408\u8d37"},{value:"forward",label:"\u63d0\u524d\u8fd8\u6b3e"}],b=function(e){(0,c.Z)(t,e);var a=(0,m.Z)(t);function t(){var e;(0,n.Z)(this,t);for(var s=arguments.length,r=new Array(s),l=0;l<s;l++)r[l]=arguments[l];return e=a.call.apply(a,[this].concat(r)),(0,i.Z)((0,o.Z)(e),"state",{params:{method:"commercial",totalPrice:100,forwardValue:80,downPayment:3,paymentMethod:"eci",housingValue:100,commercialValue:100,years:20,startAt:"2022-10-01",forwardAt:V.Lg,housingRateBase:V.WO,housingRateFactor:1,commercialRateBase:V.kq,commercialRateFactor:1,forwardMethod:"all",tqMethod:"qxbb"}}),(0,i.Z)((0,o.Z)(e),"$instance",(0,h.getCurrentInstance)()),e}return(0,l.Z)(t,[{key:"componentWillMount",value:function(){var e=this.$instance.router.params.totalPrice,a=void 0===e?"100":e;this.setParamValue("totalPrice",Number(a))}},{key:"setParamValue",value:function(e,a){var t=(0,r.Z)((0,r.Z)({},this.state.params),{},(0,i.Z)({},e,a)),s=Number((t.totalPrice*(1-t.downPayment/10)).toFixed(2));"totalPrice"!==e&&"downPayment"!==e&&"method"!==e||("commercial"===t.method?(t.commercialValue=s,t.housingValue=0):"housing"===t.method?(t.housingValue=s,t.commercialValue=0):(t.commercialValue=0,t.housingValue=s)),"housingValue"==e&&(t.commercialValue=Number((s-t.housingValue).toFixed(2))),"commercialValue"==e&&(t.housingValue=Number((s-t.commercialValue).toFixed(2))),this.setState({params:t})}},{key:"setRate",value:function(e,a){console.log(e,a),"housing"===e&&this.setState({params:(0,r.Z)((0,r.Z)({},this.state.params),{},{housingRateBase:a.value,housingRateFactor:a.factor})}),"commercial"===e&&this.setState({params:(0,r.Z)((0,r.Z)({},this.state.params),{},{commercialRateBase:a.value,commercialRateFactor:a.factor})})}},{key:"checkParams",value:function(e){var a=[{fun:function(e){return e.housingValue<0},message:"\u516c\u79ef\u91d1\u8d37\u6b3e\u989d\u5ea6\u4e0d\u80fd\u5c0f\u4e8e 0"},{fun:function(e){return e.commercialValue<0},message:"\u5546\u4e1a\u8d37\u6b3e\u989d\u5ea6\u4e0d\u80fd\u5c0f\u4e8e 0"},{fun:function(e){return e.totalPrice<=0},message:"\u8d37\u6b3e\u989d\u5ea6\u4e0d\u80fd\u5c0f\u4e8e 0"},{fun:function(e){return e.commercialRateBase*e.commercialRateFactor<0},message:"\u5546\u4e1a\u8d37\u6b3e\u5229\u7387\u4e0d\u80fd\u5c0f\u4e8e 0"},{fun:function(e){return e.commercialRateBase*e.commercialRateFactor>100},message:"\u5546\u4e1a\u8d37\u6b3e\u5229\u7387\u4e0d\u80fd\u5927\u4e8e 100"},{fun:function(e){return e.housingRateBase*e.housingRateFactor<=0},message:"\u516c\u79ef\u91d1\u8d37\u6b3e\u5229\u7387\u4e0d\u80fd\u5c0f\u4e8e 0"},{fun:function(e){return e.housingRateBase*e.housingRateFactor>=100},message:"\u516c\u79ef\u91d1\u8d37\u6b3e\u5229\u7387\u4e0d\u80fd\u5927\u4e8e 100"}];a.forEach((function(a){if(a.fun(e))throw a.message}))}},{key:"start",value:function(){var e=this.state.params;console.log("==========> start");try{this.checkParams(e);var a=Object.keys(e).map((function(a){return"".concat(a,"=").concat(e[a])})).join("&");console.log("\u5f00\u59cb\u8ba1\u7b97",a),d().navigateTo({url:"result/index?".concat(a)})}catch(e){d().showToast({title:e,icon:"none"})}}},{key:"render",value:function(){var e=this,a=this.state.params,t=V.P8.find((function(e){return e.value===a.downPayment})),s=(t&&"".concat(t.label,"(").concat((a.totalPrice*t.value/10).toFixed(2),"\u4e07\u5143)"),V.Eg.find((function(e){return e.value===a.years}))),n=s?s.label:"";return"forward"===a.method?(0,x.jsxs)(f.G7,{className:"calc",children:[(0,x.jsx)(A,{tabs:G,current:a.method,onChange:function(a){return e.setParamValue("method",a.value)}}),(0,x.jsxs)(f.G7,{className:"form",children:[(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u8d37\u6b3e\u603b\u989d"}),(0,x.jsxs)(f.G7,{className:"formItemValue",children:[(0,x.jsx)(f.II,{type:"digit",placeholderStyle:"color: #D8D9E1",placeholder:"\u8bf7\u8f93\u5165",maxLength:8,value:a.commercialValue?a.commercialValue.toString():"",onInput:function(a){var t=(0,r.Z)((0,r.Z)({},e.state.params),{},{commercialValue:a.detail.value});e.setState({params:t})},className:"formItemValueText formItemValueInput"}),(0,x.jsx)(f.G7,{className:"formItemValuePrice",children:"\u4e07\u5143"})]})]}),(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u8fd8\u6b3e\u65b9\u5f0f"}),(0,x.jsx)(f.G7,{className:"formItemValue",children:(0,x.jsx)(j,{options:V.rr,value:a.paymentMethod,onChange:function(a){return e.setParamValue("paymentMethod",a.value)}})})]}),(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u6309\u63ed\u5e74\u6570"}),(0,x.jsx)(f.G7,{className:"formItemValue",children:(0,x.jsx)(p,{options:V.Eg,value:a.years,onChangeValue:function(a){return e.setParamValue("years",a)},children:(0,x.jsx)(f.G7,{className:"formItemValueText",children:n})})})]}),(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u9996\u6b21\u8fd8\u6b3e\u65e5\u671f"}),(0,x.jsx)(f.G7,{className:"formItemValue",children:(0,x.jsx)(p,{mode:"date",value:a.startAt,onChangeValue:function(a){return e.setParamValue("startAt",a)},children:(0,x.jsx)(f.G7,{className:"formItemValueText",children:a.startAt})})})]}),(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u63d0\u524d\u8fd8\u6b3e\u65e5\u671f"}),(0,x.jsx)(f.G7,{className:"formItemValue",children:(0,x.jsx)(p,{mode:"date",value:a.forwardAt,onChangeValue:function(a){var t=(0,r.Z)((0,r.Z)({},e.state.params),{},{forwardAt:a});e.setState({params:t})},children:(0,x.jsx)(f.G7,{className:"formItemValueText",children:a.forwardAt})})})]}),(0,x.jsxs)(f.G7,{className:"formItem ".concat("mix"===a.method?"formItemX":""),children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u539f\u5229\u7387(%)"}),(0,x.jsx)(f.G7,{className:"formItemValue ".concat("mix"===a.method?"formItemX":""),children:(0,x.jsx)(f.G7,{className:"rateRow",children:(0,x.jsx)(I,{value:{value:a.commercialRateBase,factor:a.commercialRateFactor},onChange:function(a){return e.setRate("commercial",a)}})})})]}),(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u63d0\u524d\u8fd8\u6b3e\u65b9\u5f0f"}),(0,x.jsx)(f.G7,{className:"formItemValue",children:(0,x.jsx)(j,{options:V.pO,value:a.forwardMethod,onChange:function(a){return e.setParamValue("forwardMethod",a.value)}})})]}),"part"===a.forwardMethod&&(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u8fd8\u6b3e\u5904\u7406\u65b9\u5f0f"}),(0,x.jsx)(f.G7,{className:"formItemValue",children:(0,x.jsx)(j,{options:V.SA,value:a.tqMethod,onChange:function(a){return e.setParamValue("tqMethod",a.value)}})})]}),"part"===a.forwardMethod&&(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u63d0\u524d\u8fd8\u6b3e\u91d1\u989d"}),(0,x.jsxs)(f.G7,{className:"formItemValue",children:[(0,x.jsx)(f.II,{type:"digit",placeholderStyle:"color: #D8D9E1",placeholder:"\u8bf7\u8f93\u5165",maxLength:8,value:a.forwardValue?a.forwardValue.toString():"",onInput:function(a){var t=(0,r.Z)((0,r.Z)({},e.state.params),{},{forwardValue:a.detail.value});e.setState({params:t})},className:"formItemValueText formItemValueInput"}),(0,x.jsx)(f.G7,{className:"formItemValuePrice",children:"\u4e07\u5143"})]})]}),(0,x.jsx)(f.G7,{className:"btn",onClick:function(){var a=e.state.params;try{e.checkParams(a);var t=Object.keys(a).map((function(e){return"".concat(e,"=").concat(a[e])})).join("&");console.log("\u5f00\u59cb\u8ba1\u7b97",t),d().navigateTo({url:"result2/index?".concat(t)})}catch(e){}},children:"\u5f00\u59cb\u8ba1\u7b97"})]})]}):(0,x.jsxs)(f.G7,{className:"calc",children:[(0,x.jsx)(A,{tabs:G,current:a.method,onChange:function(a){return e.setParamValue("method",a.value)}}),(0,x.jsxs)(f.G7,{className:"form",children:["mix"!==a.method&&(0,x.jsxs)(f.G7,{className:"formItem formItemNoLine",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u8d37\u6b3e\u603b\u989d"}),(0,x.jsxs)(f.G7,{className:"formItemValue",children:[(0,x.jsx)(f.II,{type:"digit",placeholderStyle:"color: #D8D9E1",placeholder:"\u8bf7\u8f93\u5165",maxLength:8,value:a["".concat(a.method,"Value")]?a["".concat(a.method,"Value")].toString():"",onInput:function(t){"commercial"===a.method?e.setParamValue("commercialValue",t.detail.value):"housing"===a.method&&e.setParamValue("housingValue",t.detail.value)},className:"formItemValueText formItemValueInput"}),(0,x.jsx)(f.G7,{className:"formItemValuePrice",children:"\u4e07\u5143"})]})]}),(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u8fd8\u6b3e\u65b9\u5f0f"}),(0,x.jsx)(f.G7,{className:"formItemValue",children:(0,x.jsx)(j,{options:V.rr,value:a.paymentMethod,onChange:function(a){return e.setParamValue("paymentMethod",a.value)}})})]}),"mix"===a.method&&(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u516c\u79ef\u91d1\u8d37\u6b3e\u603b\u989d"}),(0,x.jsxs)(f.G7,{className:"formItemValue",children:[(0,x.jsx)(f.II,{type:"digit",disabled:"mix"!==a.method,placeholderStyle:"color: #D8D9E1",placeholder:"mix"===a.method?"\u8bf7\u8f93\u5165":"",maxLength:8,value:a.housingValue?a.housingValue.toString():"",onInput:function(a){var t=(0,r.Z)((0,r.Z)({},e.state.params),{},{housingValue:a.detail.value});e.setState({params:t})},className:"formItemValueText formItemValueInput"}),(0,x.jsx)(f.G7,{className:"formItemValuePrice",children:"\u4e07\u5143"})]})]}),"mix"===a.method&&(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u5546\u4e1a\u8d37\u6b3e\u603b\u989d"}),(0,x.jsxs)(f.G7,{className:"formItemValue",children:[(0,x.jsx)(f.II,{type:"digit",disabled:"mix"!==a.method,placeholderStyle:"color: #D8D9E1",placeholder:"mix"===a.method?"\u8bf7\u8f93\u5165":"",maxLength:8,value:a.commercialValue?a.commercialValue.toString():"",onInput:function(a){var t=(0,r.Z)((0,r.Z)({},e.state.params),{},{commercialValue:a.detail.value});e.setState({params:t})},className:"formItemValueText formItemValueInput"}),(0,x.jsx)(f.G7,{className:"formItemValuePrice",children:"\u4e07\u5143"})]})]}),(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u6309\u63ed\u5e74\u6570"}),(0,x.jsx)(f.G7,{className:"formItemValue",children:(0,x.jsx)(p,{options:V.Eg,value:a.years,onChangeValue:function(a){return e.setParamValue("years",a)},children:(0,x.jsx)(f.G7,{className:"formItemValueText",children:n})})})]}),(0,x.jsxs)(f.G7,{className:"formItem",children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u9996\u6b21\u8fd8\u6b3e\u65e5\u671f"}),(0,x.jsx)(f.G7,{className:"formItemValue",children:(0,x.jsx)(p,{mode:"date",value:a.startAt,onChangeValue:function(a){return e.setParamValue("startAt",a)},children:(0,x.jsx)(f.G7,{className:"formItemValueText",children:a.startAt})})})]}),(0,x.jsxs)(f.G7,{className:"formItem ".concat("mix"===a.method?"formItemX":""),children:[(0,x.jsx)(f.G7,{className:"formItemLabel",children:"\u8d37\u6b3e\u5229\u7387(%)"}),(0,x.jsxs)(f.G7,{className:"formItemValue ".concat("mix"===a.method?"formItemX":""),children:["commercial"!==a.method&&(0,x.jsxs)(f.G7,{className:"rateRow",children:["mix"===a.method&&(0,x.jsx)(f.G7,{children:"\u516c\u79ef\u91d1"}),(0,x.jsx)(I,{value:{value:a.housingRateBase,factor:a.housingRateFactor},onChange:function(a){return e.setRate("housing",a)}})]}),"housing"!==a.method&&(0,x.jsxs)(f.G7,{className:"rateRow",children:["mix"===a.method&&(0,x.jsx)(f.G7,{children:"\u5546\u4e1a\u8d37"}),(0,x.jsx)(I,{value:{value:a.commercialRateBase,factor:a.commercialRateFactor},onChange:function(a){return e.setRate("commercial",a)}})]})]})]})]}),(0,x.jsx)(f.G7,{className:"btn",onClick:this.start.bind(this),children:"\u5f00\u59cb\u8ba1\u7b97"})]})}}]),t}(u.Component),C={navigationBarTitleText:"\u623f\u8d37\u8ba1\u7b97\u5668"};Page((0,s.createPageConfig)(b,"pages/calculator/index",{root:{cn:[]}},C||{}))}},function(e){var a=function(a){return e(e.s=a)};e.O(0,[107,216,592],(function(){return a(4376)}));e.O()}]);