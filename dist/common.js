"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[592],{9754:function(e,t,a){a.d(t,{Eg:function(){return p},Lg:function(){return m},P8:function(){return i},SA:function(){return d},WO:function(){return l},kq:function(){return o},pO:function(){return s},rr:function(){return c},yx:function(){return M}});var n=a(3433),u=a(7484),r=a.n(u),l=3.1,o=4.3,i=[{value:1,label:"\u4e00\u6210"},{value:2,label:"\u4e8c\u6210"},{value:3,label:"\u4e09\u6210"},{value:4,label:"\u56db\u6210"},{value:5,label:"\u4e94\u6210"},{value:6,label:"\u516d\u6210"},{value:7,label:"\u4e03\u6210"},{value:8,label:"\u516b\u6210"},{value:9,label:"\u4e5d\u6210"}],c=[{value:"eci",label:"\u7b49\u989d\u672c\u606f"},{value:"ec",label:"\u7b49\u989d\u672c\u91d1"}],s=[{value:"all",label:"\u4e00\u6b21\u6027\u8fd8\u6e05"},{value:"part",label:"\u90e8\u5206\u63d0\u524d\u8fd8\u6b3e"}],d=[{value:"qxbb",label:"\u51cf\u5c11\u6708\u4f9b"},{value:"ygbb",label:"\u7f29\u77ed\u5e74\u9650"}],p=(0,n.Z)(new Array(30)).map((function(e,t){return{value:t+1,label:"".concat(t+1,"\u5e74(").concat(12*(t+1),")\u671f")}})),m=r()().format("YYYY-MM-DD"),h=function(e,t,a,n){var u=t/12,r=e*u*Math.pow(1+u,a)/(Math.pow(1+u,a)-1),l=e*u*(Math.pow(1+u,a)-Math.pow(1+u,n))/(Math.pow(1+u,a)-1);return{due:r,capital:r-l,interest:l}},b=function(e,t,a,n){var u=t/12,r=e/a,l=(e-r*n)*u+r;return{due:l,capital:r,interest:l-r}},v=function(e,t,a){var n=t/12;return a*e*n*Math.pow(1+n,a)/(Math.pow(1+n,a)-1)-e},f=function(e,t,a){var n=t/12;return(a+1)*e*n/2},g=function(e){var t=Number(e.commercialRateBase)/100,a=Number(e.commercialRateFactor),n=1e4*Number(e.commercialValue),u=Number(e.housingRateBase)/100,r=Number(e.housingRateFactor),l=1e4*Number(e.housingValue),o=e.method,i=e.paymentMethod,c=new Date(e.startAt),s=c.getFullYear(),d=Number(e.years),p=12*d,m=u*r,g=t*a,M="mix"===o?l+n:"housing"===o?l:n,x=0,w=0;"commercial"!==o&&(x="eci"===i?v(l,m,p):f(l,m,p)),"housing"!==o&&(w="eci"===i?v(n,g,p):f(n,g,p));for(var F=x+w,y=M+F,A=0,N=0,R=[],D=[],Y=0,k=0;k<=d;k++){for(var O=[],S=0;S<12;S++){if(Y>=p)break;0===k&&0===S&&(S=c.getMonth());var q={due:0,interest:0,capital:0},B={due:0,interest:0,capital:0};"commercial"!==o&&(q="eci"===i?h(l,m,p,Y):b(l,m,p,Y)),"housing"!==o&&(B="eci"===i?h(n,g,p,Y):b(n,g,p,Y)),A+=q.due,N+=B.due;var J={index:Y,month:S+1,capital:q.capital+B.capital,interest:q.interest+B.interest,due:q.due+B.due,rest:Math.abs(y-A-N)};D.length<2&&D.push(J),O.push(J),Y++}O.length>0&&R.push({year:s+k,list:O})}return{perMonth:D.length>0?D[0].due:0,perMonthReduce:D.length>1?D[0].due-D[1].due:0,amount:M,dueAmount:y,interestAmount:F,years:d,detail:R}},M=function(e){console.log((new Date).valueOf(),"\u5f00\u59cb\u8ba1\u7b97",e);var t=g(e);return console.log((new Date).valueOf(),"\u8ba1\u7b97\u7ed3\u679c",t),{perMonth:t.perMonth.toFixed(2),perMonthReduce:t.perMonthReduce.toFixed(2),amount:(t.amount/1e4).toFixed(2),dueAmount:(t.dueAmount/1e4).toFixed(2),interestAmount:(t.interestAmount/1e4).toFixed(2),years:t.years,detail:t.detail.map((function(e){return{year:e.year.toString(),list:e.list.map((function(e){return{index:e.index,month:e.month.toString(),due:e.due.toFixed(2),capital:e.capital.toFixed(2),interest:e.interest.toFixed(2),rest:e.rest.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}}))}}))}}}}]);